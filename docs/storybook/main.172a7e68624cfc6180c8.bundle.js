(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{275:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(16),__webpack_require__(46);var objectWithoutProperties=__webpack_require__(116),objectSpread2=__webpack_require__(49),slicedToArray=__webpack_require__(35),react=__webpack_require__(1),react_default=__webpack_require__.n(react),lib=__webpack_require__(57),lib_default=__webpack_require__.n(lib),toConsumableArray=(__webpack_require__(104),__webpack_require__(20),__webpack_require__(62),__webpack_require__(17),__webpack_require__(27),__webpack_require__(56)),src_useSpreadsheet=function(_ref){var defaultCells=_ref.defaultCells,cellsProp=_ref.cells,onCellsChangeProp=_ref.onCellsChange,defaultRows=_ref.defaultRows,rowsProp=_ref.rows,onRowsChangeProp=_ref.onRowsChange,defaultColumns=_ref.defaultColumns,columnsProp=_ref.columns,onColumnsChangeProp=_ref.onColumnsChange,totalRows=_ref.totalRows,totalColumns=_ref.totalColumns,_useState=Object(react.useState)(defaultCells||[]),_useState2=Object(slicedToArray.a)(_useState,2),cellsState=_useState2[0],setCellsState=_useState2[1],_useState3=Object(react.useState)(defaultRows||[]),_useState4=Object(slicedToArray.a)(_useState3,2),rowsState=_useState4[0],setRowsState=_useState4[1],rows=rowsProp||rowsState;rows=Object(react.useMemo)((function(){return Object(toConsumableArray.a)(Array(totalRows).keys()).map((function(key){return Object(objectSpread2.a)({},rows[key],{key:key})})).filter((function(row){return!row||!row.hidden}))}),[totalRows,rows]);var onRowsChange=onRowsChangeProp||setRowsState,_useState5=Object(react.useState)(defaultColumns||[]),_useState6=Object(slicedToArray.a)(_useState5,2),columnsState=_useState6[0],setColumnsState=_useState6[1],columns=columnsProp||columnsState;columns=Object(react.useMemo)((function(){return Object(toConsumableArray.a)(Array(totalColumns).keys()).map((function(key){return Object(objectSpread2.a)({},columns[key],{key:key})})).filter((function(column){return!column||!column.hidden}))}),[totalColumns,columns]);var onColumnsChange=onColumnsChangeProp||setColumnsState,rowsSizes=Object(react.useMemo)((function(){return rows.map((function(row){return row&&row.size}))}),[rows]),onRowsSizesChange=Object(react.useCallback)((function(rowsSetter){onRowsChange((function(rows){var curRowsSizes=rows.map((function(row){return row&&row.size}));return rowsSetter(curRowsSizes).map((function(size,index){var curRow=rows[index]||{};return Object(objectSpread2.a)({},curRow,{size:size})}))}))}),[onRowsChange]),columnsSizes=Object(react.useMemo)((function(){return columns.map((function(column){return column&&column.size}))}),[columns]),onColumnsSizesChange=Object(react.useCallback)((function(columnsSetter){onColumnsChange((function(columns){var curColumnsSizes=columns.map((function(column){return column&&column.size}));return columnsSetter(curColumnsSizes).map((function(size,index){var curColumn=columns[index]||{};return Object(objectSpread2.a)({},curColumn,{size:size})}))}))}),[onColumnsChange]);return{cells:cellsProp||cellsState,onCellsChange:onCellsChangeProp||setCellsState,rows:rows,onRowsChange:onRowsChange,columns:columns,onColumnsChange:onColumnsChange,rowsSizes:rowsSizes,onRowsSizesChange:onRowsSizesChange,columnsSizes:columnsSizes,onColumnsSizesChange:onColumnsSizesChange}},SpreadsheetCell=function(_ref){var InnerComponent=_ref.InnerComponent,value=_ref.value,props=Object(objectWithoutProperties.a)(_ref,["InnerComponent","value"]);return react_default.a.createElement(InnerComponent,Object.assign({cell:value},props))};SpreadsheetCell.displayName="SpreadsheetCell",SpreadsheetCell.__docgenInfo={description:"",methods:[],displayName:"SpreadsheetCell"};var src_SpreadsheetCell=SpreadsheetCell;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\SpreadsheetCell.js"]={name:"SpreadsheetCell",docgenInfo:SpreadsheetCell.__docgenInfo,path:"src\\SpreadsheetCell.js"});var propertiesMap={row:{coordinate:"clientY"},column:{coordinate:"clientX"}},defaultArray=[],Resizer=function(_ref){var type=_ref.type,index=_ref.index,defaultSize=_ref.defaultSize,_ref$sizes=_ref.sizes,sizes=void 0===_ref$sizes?defaultArray:_ref$sizes,onSizesChange=_ref.onSizesChange,interactionRef=Object(react.useRef)(),handleMouseDown=Object(react.useCallback)((function(event){event.persist(),event.stopPropagation();var startSize=sizes[index]||defaultSize;interactionRef.current={startCoordinate:event[propertiesMap[type].coordinate],startSize:startSize}}),[type,index,defaultSize,sizes]);return Object(react.useEffect)((function(){var handleMouseMove=function(event){var interaction=interactionRef.current;if(interaction){var diff=event[propertiesMap[type].coordinate]-interaction.startCoordinate,nextSize=interaction.startSize+diff;onSizesChange((function(sizes){var nextSizes=Object(toConsumableArray.a)(sizes);return nextSizes[index]=nextSize,nextSizes}))}},handleMouseUp=function(){interactionRef.current=void 0};return document.addEventListener("mousemove",handleMouseMove),document.addEventListener("mouseup",handleMouseUp),function(){document.removeEventListener("mousemove",handleMouseMove),document.removeEventListener("mouseup",handleMouseUp)}}),[type,index,onSizesChange]),react_default.a.createElement("div",{className:"heading-resizer ".concat(type),onMouseDown:handleMouseDown})};Resizer.displayName="Resizer",Resizer.__docgenInfo={description:"",methods:[],displayName:"Resizer",props:{sizes:{defaultValue:{value:"[]",computed:!1},required:!1}}};var src_Resizer=Resizer;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\Resizer.js"]={name:"Resizer",docgenInfo:Resizer.__docgenInfo,path:"src\\Resizer.js"});var Heading=function(_ref){var className,index,value=_ref.value,type=_ref.type,rowIndex=_ref.rowIndex,columnIndex=_ref.columnIndex,style=_ref.style,sizes=_ref.sizes,defaultSize=_ref.defaultSize,onSizesChange=_ref.onSizesChange;return"row"===type?(className="row-heading",index=rowIndex):"column"===type&&(className="column-heading",index=columnIndex),react_default.a.createElement("div",{className:"heading-cell ".concat(className),style:style},value.key+1,react_default.a.createElement(src_Resizer,{type:type,index:index,defaultSize:defaultSize,sizes:sizes,onSizesChange:onSizesChange}))};Heading.displayName="Heading",Heading.__docgenInfo={description:"",methods:[],displayName:"Heading"};var src_Heading=Heading;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\Heading.js"]={name:"Heading",docgenInfo:Heading.__docgenInfo,path:"src\\Heading.js"});var HeadingsIntersection=function(_ref){var rowHeadingWidth=_ref.rowHeadingWidth,columnHeadingHeight=_ref.columnHeadingHeight;return react_default.a.createElement("div",{className:"heading-cell heading-intersection",style:{width:rowHeadingWidth,height:columnHeadingHeight}})};HeadingsIntersection.displayName="HeadingsIntersection";var ColumnsHeadings=Object(react.forwardRef)((function(_ref2,ref){var overscroll=_ref2.overscroll,hideHeadings=_ref2.hideHeadings,_ref2$columnHeadingHe=_ref2.columnHeadingHeight,columnHeadingHeight=void 0===_ref2$columnHeadingHe?20:_ref2$columnHeadingHe,columnsSizes=_ref2.columnsSizes,onColumnsSizesChange=_ref2.onColumnsSizesChange,defaultColumnWidth=_ref2.defaultColumnWidth,columns=_ref2.columns,totalColumns=_ref2.totalColumns,columnsScrollData=_ref2.columnsScrollData,scrolledTop=_ref2.scrolledTop,columnsHeadingsValue=Object(react.useMemo)((function(){return[columns]}),[columns]);return!hideHeadings&&react_default.a.createElement(lib_default.a,{ref:ref,CellComponent:src_Heading,cellComponentProps:{type:"column",defaultSize:defaultColumnWidth,sizes:columnsSizes,onSizesChange:onColumnsSizesChange},rowComponentProps:{className:"row"},value:columnsHeadingsValue,height:columnHeadingHeight,columnsSizes:columnsSizes,className:"columns-headings".concat(scrolledTop?" last-row":""),overscroll:overscroll,totalRows:1,totalColumns:totalColumns,defaultColumnWidth:defaultColumnWidth,defaultRowHeight:columnHeadingHeight,columnsScrollData:columnsScrollData})})),RowsHeadings=Object(react.forwardRef)((function(_ref3,ref){var overscroll=_ref3.overscroll,hideHeadings=_ref3.hideHeadings,_ref3$rowHeadingWidth=_ref3.rowHeadingWidth,rowHeadingWidth=void 0===_ref3$rowHeadingWidth?40:_ref3$rowHeadingWidth,rowsSizes=_ref3.rowsSizes,onRowsSizesChange=_ref3.onRowsSizesChange,defaultRowHeight=_ref3.defaultRowHeight,rows=_ref3.rows,totalRows=_ref3.totalRows,rowsScrollData=_ref3.rowsScrollData,scrolledLeft=_ref3.scrolledLeft;return!hideHeadings&&react_default.a.createElement(lib_default.a,{ref:ref,CellComponent:src_Heading,cellComponentProps:{type:"row",defaultSize:defaultRowHeight,sizes:rowsSizes,onSizesChange:onRowsSizesChange},rowComponentProps:{className:"row"},value:rows,width:rowHeadingWidth,rowsSizes:rowsSizes,className:"rows-headings".concat(scrolledLeft?" last-column":""),overscroll:overscroll,totalColumns:1,totalRows:totalRows,defaultColumnWidth:rowHeadingWidth,defaultRowHeight:defaultRowHeight,rowsScrollData:rowsScrollData})})),Spreadsheet=function(inputProps){var _useState=Object(react.useState)(),_useState2=Object(slicedToArray.a)(_useState,2),rowsScrollData=_useState2[0],onRowsScrollDataChange=_useState2[1],_useState3=Object(react.useState)(),_useState4=Object(slicedToArray.a)(_useState3,2),columnsScrollData=_useState4[0],onColumnsScrollDataChange=_useState4[1],scrollerContainerRef=Object(react.useRef)(),spreadsheetProps=src_useSpreadsheet(inputProps),cells=spreadsheetProps.cells,rows=spreadsheetProps.rows,columns=spreadsheetProps.columns,rowsSizes=spreadsheetProps.rowsSizes,onRowsSizesChange=spreadsheetProps.onRowsSizesChange,columnsSizes=spreadsheetProps.columnsSizes,onColumnsSizesChange=spreadsheetProps.onColumnsSizesChange,_useState5=Object(react.useState)(!1),_useState6=Object(slicedToArray.a)(_useState5,2),scrolledTop=_useState6[0],setScrolledTop=_useState6[1],_useState7=Object(react.useState)(!1),_useState8=Object(slicedToArray.a)(_useState7,2),scrolledLeft=_useState8[0],setScrolledLeft=_useState8[1],handleScroll=Object(react.useCallback)((function(e){setScrolledTop(0<e.target.scrollTop),setScrolledLeft(0<e.target.scrollLeft)}),[]),scrollerProps=Object(lib.useScroller)(Object(objectSpread2.a)({},inputProps,{rowsSizes:rowsSizes,columnsSizes:columnsSizes,value:spreadsheetProps.cells,rowsScrollData:rowsScrollData,onRowsScrollDataChange:onRowsScrollDataChange,columnsScrollData:columnsScrollData,onColumnsScrollDataChange:onColumnsScrollDataChange,scrollerContainerRef:scrollerContainerRef,onScroll:handleScroll})),style=inputProps.style,className=inputProps.className,defaultRowHeight=inputProps.defaultRowHeight,defaultColumnWidth=inputProps.defaultColumnWidth,rowHeadingWidth=inputProps.rowHeadingWidth,columnHeadingHeight=inputProps.columnHeadingHeight,totalRows=inputProps.totalRows,totalColumns=inputProps.totalColumns,overscroll=inputProps.overscroll,hideHeadings=inputProps.hideHeadings,noGrid=inputProps.noGrid,width=inputProps.width,height=inputProps.height,CellComponent=inputProps.CellComponent,restInputProps=Object(objectWithoutProperties.a)(inputProps,["style","className","defaultRowHeight","defaultColumnWidth","rowHeadingWidth","columnHeadingHeight","totalRows","totalColumns","overscroll","hideHeadings","noGrid","width","height","CellComponent"]),visibleRowsIndexes=scrollerProps.visibleRowsIndexes,visibleColumnsIndexes=scrollerProps.visibleColumnsIndexes,onScroll=scrollerProps.onScroll,scrollAreaStyle=scrollerProps.scrollAreaStyle,visibleAreaStyle=scrollerProps.visibleAreaStyle,columnsHeadingsElement=react_default.a.createElement(ColumnsHeadings,{ref:scrollerContainerRef,columns:columns,columnHeadingHeight:columnHeadingHeight,totalColumns:totalColumns,columnsSizes:columnsSizes,onColumnsSizesChange:onColumnsSizesChange,defaultColumnWidth:defaultColumnWidth,hideHeadings:hideHeadings,columnsScrollData:columnsScrollData,overscroll:overscroll,width:scrollAreaStyle.width,scrolledTop:scrolledTop}),rowsHeadingsElement=react_default.a.createElement(RowsHeadings,{ref:scrollerContainerRef,rows:rows,rowHeadingWidth:rowHeadingWidth,totalRows:totalRows,rowsSizes:rowsSizes,onRowsSizesChange:onRowsSizesChange,defaultRowHeight:defaultRowHeight,hideHeadings:hideHeadings,rowsScrollData:rowsScrollData,overscroll:overscroll,scrolledLeft:scrolledLeft}),valueElements=Object(lib.renderCells)({visibleRowsIndexes:visibleRowsIndexes,visibleColumnsIndexes:visibleColumnsIndexes,rowComponentProps:{className:"row"},CellComponent:src_SpreadsheetCell,cellComponentProps:{InnerComponent:CellComponent}});return react_default.a.createElement(lib.ScrollerContainer,Object.assign({},restInputProps,{ref:scrollerContainerRef,defaultRowHeight:defaultRowHeight,defaultColumnWidth:defaultColumnWidth,width:width,height:height,className:"spreadsheet".concat(className?" ".concat(className):"").concat(noGrid?" no-grid":""),value:cells,style:Object(objectSpread2.a)({},style,{display:"grid",gridTemplateColumns:"".concat(rowHeadingWidth,"px auto")}),onScroll:onScroll,rowsSizes:rowsSizes,columnsSizes:columnsSizes}),react_default.a.createElement(HeadingsIntersection,{rowHeadingWidth:rowHeadingWidth,columnHeadingHeight:columnHeadingHeight}),columnsHeadingsElement,rowsHeadingsElement,react_default.a.createElement("div",{style:scrollAreaStyle},react_default.a.createElement("div",{style:visibleAreaStyle},valueElements)))};Spreadsheet.displayName="Spreadsheet",Spreadsheet.__docgenInfo={description:"",methods:[],displayName:"Spreadsheet"};__webpack_exports__.a=Spreadsheet;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\Spreadsheet.js"]={name:"Spreadsheet",docgenInfo:Spreadsheet.__docgenInfo,path:"src\\Spreadsheet.js"})},276:function(module,exports,__webpack_require__){__webpack_require__(277),__webpack_require__(423),module.exports=__webpack_require__(424)},341:function(module,exports){},424:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(114);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(617)],module)}.call(this,__webpack_require__(215)(module))},617:function(module,exports,__webpack_require__){var map={"./Spreadsheet.stories.js":618};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=617},618:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__.d(__webpack_exports__,"defaultComponent",(function(){return defaultComponent}));__webpack_require__(16),__webpack_require__(20),__webpack_require__(62),__webpack_require__(46),__webpack_require__(17),__webpack_require__(27);var columnsCount,C_Users_Vadim_Node_projects_react_spreadsheet_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(56),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),_storybook_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(114),_Spreadsheet__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(275),generateMeta=(__webpack_require__(623),function(count){return Object(C_Users_Vadim_Node_projects_react_spreadsheet_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_6__.a)(Array(count).keys())}),cells=(columnsCount=50,generateMeta(1e3).map((function(row){return generateMeta(columnsCount).map((function(column){return{value:"Value ".concat(row," - ").concat(column)}}))}))),CellComponent=function(_ref){var cell=_ref.cell,style=_ref.style;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"cell value-cell",style:style},cell.value)};CellComponent.displayName="CellComponent";var defaultComponent=function(props){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_Spreadsheet__WEBPACK_IMPORTED_MODULE_9__.a,Object.assign({defaultRowHeight:30,defaultColumnWidth:120,cells:cells,totalRows:cells.length,totalColumns:cells[0].length,height:"100vh",overscroll:2,CellComponent:CellComponent,columnHeadingHeight:20,rowHeadingWidth:40},props))};defaultComponent.displayName="defaultComponent",Object(_storybook_react__WEBPACK_IMPORTED_MODULE_8__.storiesOf)("Spreadsheet",module).add("default",defaultComponent),defaultComponent.__docgenInfo={description:"",methods:[],displayName:"defaultComponent"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\Spreadsheet.stories.js"]={name:"defaultComponent",docgenInfo:defaultComponent.__docgenInfo,path:"src\\Spreadsheet.stories.js"})}.call(this,__webpack_require__(215)(module))},623:function(module,exports,__webpack_require__){}},[[276,1,2]]]);
//# sourceMappingURL=main.172a7e68624cfc6180c8.bundle.js.map