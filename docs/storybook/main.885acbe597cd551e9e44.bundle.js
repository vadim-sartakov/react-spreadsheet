(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{272:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(53),__webpack_require__(54);var objectSpread2=__webpack_require__(36),slicedToArray=__webpack_require__(35),react=__webpack_require__(0),react_default=__webpack_require__.n(react),lib=__webpack_require__(49),lib_default=__webpack_require__.n(lib),toConsumableArray=(__webpack_require__(104),__webpack_require__(20),__webpack_require__(16),__webpack_require__(27),__webpack_require__(58)),src_useSpreadsheet=function(_ref){var defaultCells=_ref.defaultCells,cellsProp=_ref.cells,onCellsChangeProp=_ref.onCellsChange,defaultRows=_ref.defaultRows,rowsProp=_ref.rows,onRowsChangeProp=_ref.onRowsChange,defaultColumns=_ref.defaultColumns,columnsProp=_ref.columns,onColumnsChangeProp=_ref.onColumnsChange,totalRows=_ref.totalRows,totalColumns=_ref.totalColumns,_useState=Object(react.useState)(defaultCells||[]),_useState2=Object(slicedToArray.a)(_useState,2),cellsState=_useState2[0],setCellsState=_useState2[1],_useState3=Object(react.useState)(defaultRows||[]),_useState4=Object(slicedToArray.a)(_useState3,2),rowsState=_useState4[0],setRowsState=_useState4[1],rows=rowsProp||rowsState;rows=Object(react.useMemo)((function(){return Object(toConsumableArray.a)(Array(totalRows).keys()).map((function(key){return Object(objectSpread2.a)({},rows[key],{key:key})})).filter((function(row){return!row||!row.hidden}))}),[totalRows,rows]);var onRowsChange=onRowsChangeProp||setRowsState,_useState5=Object(react.useState)(defaultColumns||[]),_useState6=Object(slicedToArray.a)(_useState5,2),columnsState=_useState6[0],setColumnsState=_useState6[1],columns=columnsProp||columnsState;columns=Object(react.useMemo)((function(){return Object(toConsumableArray.a)(Array(totalColumns).keys()).map((function(key){return Object(objectSpread2.a)({},columns[key],{key:key})})).filter((function(column){return!column||!column.hidden}))}),[totalColumns,columns]);var onColumnsChange=onColumnsChangeProp||setColumnsState,rowsSizes=Object(react.useMemo)((function(){return rows.map((function(row){return row&&row.size}))}),[rows]),onRowsSizesChange=Object(react.useCallback)((function(rowsSetter){onRowsChange((function(rows){var curRowsSizes=rows.map((function(row){return row&&row.size}));return rowsSetter(curRowsSizes).map((function(size,index){var curRow=rows[index]||{};return Object(objectSpread2.a)({},curRow,{size:size})}))}))}),[onRowsChange]),columnsSizes=Object(react.useMemo)((function(){return columns.map((function(column){return column&&column.size}))}),[columns]),onColumnsSizesChange=Object(react.useCallback)((function(columnsSetter){onColumnsChange((function(columns){var curColumnsSizes=columns.map((function(column){return column&&column.size}));return columnsSetter(curColumnsSizes).map((function(size,index){var curColumn=columns[index]||{};return Object(objectSpread2.a)({},curColumn,{size:size})}))}))}),[onColumnsChange]);return{cells:cellsProp||cellsState,onCellsChange:onCellsChangeProp||setCellsState,rows:rows,onRowsChange:onRowsChange,columns:columns,onColumnsChange:onColumnsChange,rowsSizes:rowsSizes,onRowsSizesChange:onRowsSizesChange,columnsSizes:columnsSizes,onColumnsSizesChange:onColumnsSizesChange}},SpreadsheetCell=function(props){return react_default.a.createElement(lib.ScrollerCell,props)};SpreadsheetCell.displayName="SpreadsheetCell",SpreadsheetCell.__docgenInfo={description:"",methods:[],displayName:"SpreadsheetCell"};var src_SpreadsheetCell=SpreadsheetCell;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\SpreadsheetCell.js"]={name:"SpreadsheetCell",docgenInfo:SpreadsheetCell.__docgenInfo,path:"src\\SpreadsheetCell.js"});var propertiesMap={row:{coordinate:"clientY"},column:{coordinate:"clientX"}},defaultArray=[],Resizer=function(_ref){var type=_ref.type,index=_ref.index,defaultSize=_ref.defaultSize,_ref$sizes=_ref.sizes,sizes=void 0===_ref$sizes?defaultArray:_ref$sizes,onSizesChange=_ref.onSizesChange,interactionRef=Object(react.useRef)(),handleMouseDown=Object(react.useCallback)((function(event){event.persist(),event.stopPropagation();var startSize=sizes[index]||defaultSize;interactionRef.current={startCoordinate:event[propertiesMap[type].coordinate],startSize:startSize}}),[type,index,defaultSize,sizes]);return Object(react.useEffect)((function(){var handleMouseMove=function(event){var interaction=interactionRef.current;if(interaction){var diff=event[propertiesMap[type].coordinate]-interaction.startCoordinate,nextSize=interaction.startSize+diff;onSizesChange((function(sizes){var nextSizes=Object(toConsumableArray.a)(sizes);return nextSizes[index]=nextSize,nextSizes}))}},handleMouseUp=function(){interactionRef.current=void 0};return document.addEventListener("mousemove",handleMouseMove),document.addEventListener("mouseup",handleMouseUp),function(){document.removeEventListener("mousemove",handleMouseMove),document.removeEventListener("mouseup",handleMouseUp)}}),[type,index,onSizesChange]),react_default.a.createElement("div",{className:"heading-resizer ".concat(type),onMouseDown:handleMouseDown})};Resizer.displayName="Resizer",Resizer.__docgenInfo={description:"",methods:[],displayName:"Resizer",props:{sizes:{defaultValue:{value:"[]",computed:!1},required:!1}}};var src_Resizer=Resizer;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\Resizer.js"]={name:"Resizer",docgenInfo:Resizer.__docgenInfo,path:"src\\Resizer.js"});var Heading=function(_ref){var className,index,value=_ref.value,type=_ref.type,rowIndex=_ref.rowIndex,columnIndex=_ref.columnIndex,style=_ref.style,sizes=_ref.sizes,defaultSize=_ref.defaultSize,onSizesChange=_ref.onSizesChange;return"row"===type?(className="row-heading",index=rowIndex):"column"===type&&(className="column-heading",index=columnIndex),react_default.a.createElement("div",{className:"heading-cell ".concat(className),style:style},value.key+1,react_default.a.createElement(src_Resizer,{type:type,index:index,defaultSize:defaultSize,sizes:sizes,onSizesChange:onSizesChange}))};Heading.displayName="Heading",Heading.__docgenInfo={description:"",methods:[],displayName:"Heading"};var src_Heading=Heading;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\Heading.js"]={name:"Heading",docgenInfo:Heading.__docgenInfo,path:"src\\Heading.js"});var HeadingsIntersection=function(_ref){var rowHeadingWidth=_ref.rowHeadingWidth,columnHeadingHeight=_ref.columnHeadingHeight;return react_default.a.createElement("div",{className:"heading-cell heading-intersection",style:{width:rowHeadingWidth,height:columnHeadingHeight}})};HeadingsIntersection.displayName="HeadingsIntersection";var ColumnsHeadings=Object(react.forwardRef)((function(_ref2,ref){var overscroll=_ref2.overscroll,hideHeadings=_ref2.hideHeadings,_ref2$columnHeadingHe=_ref2.columnHeadingHeight,columnHeadingHeight=void 0===_ref2$columnHeadingHe?20:_ref2$columnHeadingHe,columnsSizes=_ref2.columnsSizes,onColumnsSizesChange=_ref2.onColumnsSizesChange,defaultColumnWidth=_ref2.defaultColumnWidth,columns=_ref2.columns,totalColumns=_ref2.totalColumns,columnsScrollData=_ref2.columnsScrollData,scrolledTop=_ref2.scrolledTop,columnsHeadingsValue=Object(react.useMemo)((function(){return[columns]}),[columns]);return!hideHeadings&&react_default.a.createElement(lib_default.a,{ref:ref,CellComponent:src_Heading,cellComponentProps:{type:"column",defaultSize:defaultColumnWidth,sizes:columnsSizes,onSizesChange:onColumnsSizesChange},rowComponentProps:{className:"row"},value:columnsHeadingsValue,height:columnHeadingHeight,columnsSizes:columnsSizes,className:"columns-headings".concat(scrolledTop?" last-row":""),overscroll:overscroll,totalRows:1,totalColumns:totalColumns,defaultColumnWidth:defaultColumnWidth,defaultRowHeight:columnHeadingHeight,columnsScrollData:columnsScrollData})})),RowsHeadings=Object(react.forwardRef)((function(_ref3,ref){var overscroll=_ref3.overscroll,hideHeadings=_ref3.hideHeadings,_ref3$rowHeadingWidth=_ref3.rowHeadingWidth,rowHeadingWidth=void 0===_ref3$rowHeadingWidth?40:_ref3$rowHeadingWidth,rowsSizes=_ref3.rowsSizes,onRowsSizesChange=_ref3.onRowsSizesChange,defaultRowHeight=_ref3.defaultRowHeight,rows=_ref3.rows,totalRows=_ref3.totalRows,rowsScrollData=_ref3.rowsScrollData,scrolledLeft=_ref3.scrolledLeft;return!hideHeadings&&react_default.a.createElement(lib_default.a,{ref:ref,CellComponent:src_Heading,cellComponentProps:{type:"row",defaultSize:defaultRowHeight,sizes:rowsSizes,onSizesChange:onRowsSizesChange},rowComponentProps:{className:"row"},value:rows,width:rowHeadingWidth,rowsSizes:rowsSizes,className:"rows-headings".concat(scrolledLeft?" last-column":""),overscroll:overscroll,totalColumns:1,totalRows:totalRows,defaultColumnWidth:rowHeadingWidth,defaultRowHeight:defaultRowHeight,rowsScrollData:rowsScrollData})})),Spreadsheet=function(inputProps){var _useState=Object(react.useState)(),_useState2=Object(slicedToArray.a)(_useState,2),rowsScrollData=_useState2[0],onRowsScrollDataChange=_useState2[1],_useState3=Object(react.useState)(),_useState4=Object(slicedToArray.a)(_useState3,2),columnsScrollData=_useState4[0],onColumnsScrollDataChange=_useState4[1],scrollerContainerRef=Object(react.useRef)(),spreadsheetProps=src_useSpreadsheet(inputProps),_useState5=Object(react.useState)(!1),_useState6=Object(slicedToArray.a)(_useState5,2),scrolledTop=_useState6[0],setScrolledTop=_useState6[1],_useState7=Object(react.useState)(!1),_useState8=Object(slicedToArray.a)(_useState7,2),scrolledLeft=_useState8[0],setScrolledLeft=_useState8[1],handleScroll=Object(react.useCallback)((function(e){setScrolledTop(0<e.target.scrollTop),setScrolledLeft(0<e.target.scrollLeft)}),[]),props=Object(objectSpread2.a)({},inputProps,{},spreadsheetProps),scrollerProps=Object(lib.useScroller)(Object(objectSpread2.a)({},props,{value:props.cells,rowsScrollData:rowsScrollData,onRowsScrollDataChange:onRowsScrollDataChange,columnsScrollData:columnsScrollData,onColumnsScrollDataChange:onColumnsScrollDataChange,scrollerContainerRef:scrollerContainerRef,onScroll:handleScroll})),_props=props=Object(objectSpread2.a)({},props,{},scrollerProps),visibleRowsIndexes=_props.visibleRowsIndexes,visibleColumnsIndexes=_props.visibleColumnsIndexes,scrollAreaStyle=_props.scrollAreaStyle,visibleAreaStyle=_props.visibleAreaStyle,hideHeadings=_props.hideHeadings,noGrid=_props.noGrid,cells=_props.cells,rowsSizes=_props.rowsSizes,onRowsSizesChange=_props.onRowsSizesChange,columnsSizes=_props.columnsSizes,onColumnsSizesChange=_props.onColumnsSizesChange,rows=_props.rows,columns=_props.columns,rowHeadingWidth=_props.rowHeadingWidth,columnHeadingHeight=_props.columnHeadingHeight,totalRows=_props.totalRows,totalColumns=_props.totalColumns,defaultRowHeight=_props.defaultRowHeight,defaultColumnWidth=_props.defaultColumnWidth,overscroll=_props.overscroll,CellComponent=_props.CellComponent,resultClassName="spreadsheet".concat(noGrid?" no-grid":""),columnsHeadingsElement=react_default.a.createElement(ColumnsHeadings,{ref:scrollerContainerRef,columns:columns,columnHeadingHeight:columnHeadingHeight,totalColumns:totalColumns,columnsSizes:columnsSizes,onColumnsSizesChange:onColumnsSizesChange,defaultColumnWidth:defaultColumnWidth,hideHeadings:hideHeadings,columnsScrollData:columnsScrollData,overscroll:overscroll,width:scrollAreaStyle.width,scrolledTop:scrolledTop}),rowsHeadingsElement=react_default.a.createElement(RowsHeadings,{ref:scrollerContainerRef,rows:rows,rowHeadingWidth:rowHeadingWidth,totalRows:totalRows,rowsSizes:rowsSizes,onRowsSizesChange:onRowsSizesChange,defaultRowHeight:defaultRowHeight,hideHeadings:hideHeadings,rowsScrollData:rowsScrollData,overscroll:overscroll,scrolledLeft:scrolledLeft}),valueElements=visibleRowsIndexes.map((function(rowIndex){var columnsElements=visibleColumnsIndexes.map((function(columnIndex){return react_default.a.createElement(src_SpreadsheetCell,{key:columnIndex,Component:CellComponent,rowIndex:rowIndex,columnIndex:columnIndex})}));return react_default.a.createElement("div",{key:rowIndex,className:"row"},columnsElements)}));return react_default.a.createElement(lib.ScrollerContainer,Object.assign({ref:scrollerContainerRef,className:resultClassName,value:cells,style:{display:"grid",gridTemplateColumns:"".concat(rowHeadingWidth,"px auto")}},props),react_default.a.createElement(HeadingsIntersection,{rowHeadingWidth:rowHeadingWidth,columnHeadingHeight:columnHeadingHeight}),columnsHeadingsElement,rowsHeadingsElement,react_default.a.createElement("div",{style:scrollAreaStyle},react_default.a.createElement("div",{style:visibleAreaStyle},valueElements)))};Spreadsheet.displayName="Spreadsheet",Spreadsheet.__docgenInfo={description:"",methods:[],displayName:"Spreadsheet"};__webpack_exports__.a=Spreadsheet;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\Spreadsheet.js"]={name:"Spreadsheet",docgenInfo:Spreadsheet.__docgenInfo,path:"src\\Spreadsheet.js"})},273:function(module,exports,__webpack_require__){__webpack_require__(274),__webpack_require__(420),module.exports=__webpack_require__(421)},338:function(module,exports){},421:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(114);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(614)],module)}.call(this,__webpack_require__(214)(module))},614:function(module,exports,__webpack_require__){var map={"./Spreadsheet.stories.js":615};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=614},615:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__.d(__webpack_exports__,"defaultComponent",(function(){return defaultComponent}));__webpack_require__(17),__webpack_require__(20),__webpack_require__(53),__webpack_require__(54),__webpack_require__(16),__webpack_require__(27);var columnsCount,C_Users_Vadim_Node_projects_react_spreadsheet_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(58),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),_storybook_react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(114),_Spreadsheet__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(272),generateMeta=(__webpack_require__(621),function(count){return Object(C_Users_Vadim_Node_projects_react_spreadsheet_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_6__.a)(Array(count).keys())}),cells=(columnsCount=50,generateMeta(1e3).map((function(row){return generateMeta(columnsCount).map((function(column){return{value:"Value ".concat(row," - ").concat(column)}}))}))),CellComponent=function(_ref){var cell=_ref.value,style=_ref.style;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"cell value-cell",style:style},cell.value)};CellComponent.displayName="CellComponent";var defaultComponent=function(props){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_Spreadsheet__WEBPACK_IMPORTED_MODULE_9__.a,Object.assign({defaultRowHeight:30,defaultColumnWidth:120,cells:cells,totalRows:cells.length,totalColumns:cells[0].length,height:"100vh",overscroll:2,CellComponent:CellComponent,columnHeadingHeight:20,rowHeadingWidth:40},props))};defaultComponent.displayName="defaultComponent",Object(_storybook_react__WEBPACK_IMPORTED_MODULE_8__.storiesOf)("Spreadsheet",module).add("default",defaultComponent),defaultComponent.__docgenInfo={description:"",methods:[],displayName:"defaultComponent"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src\\Spreadsheet.stories.js"]={name:"defaultComponent",docgenInfo:defaultComponent.__docgenInfo,path:"src\\Spreadsheet.stories.js"})}.call(this,__webpack_require__(214)(module))},621:function(module,exports,__webpack_require__){}},[[273,1,2]]]);
//# sourceMappingURL=main.885acbe597cd551e9e44.bundle.js.map